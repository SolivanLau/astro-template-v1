---
import cmsFetch from "@assets/scripts/cms/cmsFetch";
import Layout from "@layouts/PageLayout.astro";
import Header from "@layouts/Header.astro";
import bgHeader from "@images/events-bg.png";
import Title from "@components/Title.astro";
const queryParameters = {
    fields: ["title", "slug"],
    populate: {
        poster: "*",
        details: {
            populate: {
                dateTime: "*",
            },
        },
    },
};
const pageQuery = await cmsFetch("events", queryParameters);
---

<Layout>
    <Header title="Concert & Events" backgroundImgPath={bgHeader} />
    <main>
        <!-- CURRENT EVENTS -->
        <section class="wrapper section__padding">
            <Title tagName="h2" topper="2024/25 Season">Upcoming Concerts & Events</Title>
            <ul>
                <li><a href="/">Home</a></li>
                <li><a href="/connect">Connect Page</a></li>
            </ul>
        </section>

        <!-- ALL EVENTS -->
        <section class="wrapper section__padding">
            <Title tagName="h2" topper="Our Projects">Past Concerts</Title>
            {
                // ALL Events
                pageQuery && pageQuery.length > 0 && (
                    <ul>
                        {pageQuery.map((event) => {
                            const { title, slug }: { title: string; slug: string } =
                                event.attributes;
                            return (
                                <li>
                                    <a href={`/events/${slug}`}>{title}</a>
                                </li>
                            );
                        })}
                    </ul>
                )
            }
        </section>
    </main>
</Layout>

<style lang="scss"></style>
